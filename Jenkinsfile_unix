String parameterFileName = "parameter.json";

pipeline {

    agent any

    stages {

        /*
        stage('Clean Workspace') {
            steps {
                cleanWs()
            }Perform code check-out
        }*/

        stage('pipeline initialization') {
            steps {
                sh """
                    echo 'This is pipeline initialization step'
                    echo 'We will be performing code check-out, prepare run environment and execute the project'
                """
            }
        }

        stage('code checkout') {
            steps{
                echo 'Perform code check-out'
            }
        }

        stage('prepare environment and execute the module') {
            steps {
                script {
                    dir(workspace) {
                        sh """
                            echo 'Perform project execution run environment'                            
                            current workspace : $workspace
                            ls -lat
                            python3.8 --version
                            cat parameter.json > param.json
                            python3.8 GetStorage.py
                        """
                    }
                }
            }
        }

        stage('Move the result file to a different space location') {
            steps {
                dir(workspace) {
                    echo "Execute project artifacts"
                    sh """
                        cp /PublishResults/diskSpaceInfo.json /tmp/misc/
                    """
                }
            }
        }

    }
}